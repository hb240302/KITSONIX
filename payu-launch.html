<!DOCTYPE html>
<html>
<body>
<script>
  const params = new URLSearchParams(window.location.search);
  const encoded = params.get("data");

  if (!encoded) {
    document.body.innerHTML = "Invalid payment session";
    throw new Error("Missing PayU data");
  }

  const data = JSON.parse(decodeURIComponent(encoded));

  const form = document.createElement("form");
  form.method = "POST";
  form.action = "https://secure.payu.in/_payment";

  Object.keys(data).forEach(key => {
    const input = document.createElement("input");
    input.type = "hidden";
    input.name = key;
    input.value = data[key];
    form.appendChild(input);
  });

  document.body.appendChild(form);
  form.submit();
</script>
</body>
</html>
